(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["Auth"],{

/***/ "./src/components/Field.js":
/*!*********************************!*\
  !*** ./src/components/Field.js ***!
  \*********************************/
/*! exports provided: FormField, FormSubmit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FormField\", function() { return FormField; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FormSubmit\", function() { return FormSubmit; });\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Icon */ \"./src/components/Icon.js\");\n\n\n\n\nvar FormField = function FormField(_ref) {\n  var field = _ref.field,\n      form = _ref.form,\n      props = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_ref, [\"field\", \"form\"]);\n\n  var hasError = form.touched[field.name] && form.errors[field.name];\n  var valid = form.touched[field.name] && !hasError;\n  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"field\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", {\n    className: \"label\"\n  }, props.placeholder), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"control has-icons-right\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"input\", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({\n    className: \"input \".concat(hasError ? 'is-danger' : valid ? 'is-success' : '')\n  }, field, props, {\n    disabled: form.isSubmitting\n  })), hasError ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_Icon__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    iconName: \"exclamation-triangle\",\n    iconClasses: \"is-small is-right\"\n  }) : '', valid ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_Icon__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    iconName: \"check\",\n    iconClasses: \"is-small is-right\"\n  }) : ''), hasError ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"p\", {\n    className: \"help is-danger\"\n  }, form.errors[field.name]) : '');\n};\nvar FormSubmit = function FormSubmit(_ref2) {\n  var formProps = _ref2.formProps,\n      props = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_ref2, [\"formProps\"]);\n\n  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"field\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"control is-expanded\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"button\", {\n    className: \"button is-link is-fullwidth\",\n    type: \"submit\",\n    disabled: formProps.isSubmitting || !formProps.isValid\n  }, props.children)));\n};\n\n//# sourceURL=webpack:///./src/components/Field.js?");

/***/ }),

/***/ "./src/screens/auth/Auth.js":
/*!**********************************!*\
  !*** ./src/screens/auth/Auth.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_cookie__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-cookie */ \"./node_modules/react-cookie/es6/index.js\");\n/* harmony import */ var _components_Field__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../components/Field */ \"./src/components/Field.js\");\n/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! formik */ \"./node_modules/formik/dist/formik.esm.js\");\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! yup */ \"./node_modules/yup/lib/index.js\");\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(yup__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _api_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../api/api */ \"./src/api/api.js\");\n/* harmony import */ var aviator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! aviator */ \"./node_modules/aviator/index.js\");\n/* harmony import */ var aviator__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(aviator__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n\n\n\n\n\n\n\n\n\nvar SignInSchema = yup__WEBPACK_IMPORTED_MODULE_9__[\"object\"]().shape({\n  username: yup__WEBPACK_IMPORTED_MODULE_9__[\"string\"]().max(20, \"Maximum 20 characters\").required(\"Requis\"),\n  password: yup__WEBPACK_IMPORTED_MODULE_9__[\"string\"]().required(\"Requis\")\n});\n\nvar Auth =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(Auth, _React$Component);\n\n  function Auth() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Auth);\n\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(Auth).apply(this, arguments));\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Auth, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_5___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_8__[\"Formik\"], {\n        onSubmit: function onSubmit(values, actions) {\n          Object(_api_api__WEBPACK_IMPORTED_MODULE_10__[\"fetchToken\"])(values.username, values.password).then(function (result) {\n            actions.setSubmitting(false);\n\n            if (result.ok) {\n              _this.props.cookies.set(\"auth_token\", result.token, {\n                path: \"/\"\n              });\n\n              localStorage.setItem(\"userId\", result.id);\n              Aviator.refresh();\n            } else {\n              actions.setFieldError(\"password\", \"Mot de passe incorrect\");\n            }\n          }).catch(function (err) {\n            console.log(err);\n            actions.setSubmitting(false);\n            actions.setFieldError(\"password\", \"Vérifiez votre connexion ou l'état du serveur\");\n          });\n        },\n        initialValues: {\n          username: '',\n          password: ''\n        },\n        validationSchema: SignInSchema,\n        render: function render(props) {\n          return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_8__[\"Form\"], {\n            className: \"form\"\n          }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_8__[\"Field\"], {\n            name: \"username\",\n            type: \"text\",\n            placeholder: \"Nom d'utilisateur\",\n            component: _components_Field__WEBPACK_IMPORTED_MODULE_7__[\"FormField\"]\n          }), react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_8__[\"Field\"], {\n            name: \"password\",\n            type: \"password\",\n            placeholder: \"Mot de passe\",\n            component: _components_Field__WEBPACK_IMPORTED_MODULE_7__[\"FormField\"]\n          }), react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_components_Field__WEBPACK_IMPORTED_MODULE_7__[\"FormSubmit\"], {\n            formProps: props\n          }, props.isSubmitting ? \"Connexion ...\" : \"Se connecter\"));\n        }\n      }));\n    }\n  }]);\n\n  return Auth;\n}(react__WEBPACK_IMPORTED_MODULE_5___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_cookie__WEBPACK_IMPORTED_MODULE_6__[\"withCookies\"])(Auth));\n\n//# sourceURL=webpack:///./src/screens/auth/Auth.js?");

/***/ })

}]);